{% from "tag/tag.njk" import tag %}

{% macro card(card) %}
	<article class="card">
		<header class="card__header">
			<h{{ (card.heading.level if card.heading.level else "3") }} class="card__heading">
				<a href="{{ card.href }}">
					{% if card.heading.icon %}
						<span class="card__icon icon icon--{{ card.heading.icon }}" aria-hidden="false"></span>
					{% endif %}

					{{ card.heading.text }}
				</a>
			</h{{ card.heading.level if card.heading.level else "3" }}>
		</header>
		{% if card.metadata %}
			<dl class="card__metadata">
				{% if card.tag %}
					<div class="card__metadatum">
						<dt>
							{{ tag({ className: "card__tag", label: card.tag.label, modifier: card.tag.modifier }) }}
						</dt>
						<dd class="visually-hidden">Yes</dd>
					</div>
				{% elif card.tags %}
					{% for t in card.tags %}
						<div class="card__metadatum">
							<dt>
								{{ tag({ className: "card__tag", label: t.label, modifier: t.modifier }) }}
							</dt>
							<dd class="visually-hidden">Yes</dd>
						</div>
					{% endfor %}
				{% endif %}
				{% for item in card.metadata %}
					<div class="card__metadatum">
						<dt>{{ item.key }}:</dt>
						<dd>
							{% if item.datetime %}
								<time datetime="{{ item.datetime }}">{{ item.value }}</time>
							{% else %}
								{{ item.value }}
							{% endif %}
						</dd>
					</div>
				{% endfor %}
			</dl>
		{% endif %}
	</article>
{% endmacro %}
